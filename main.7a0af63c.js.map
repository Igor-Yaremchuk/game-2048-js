{"version":3,"sources":["scripts/main.js"],"names":["startBtn","document","querySelector","fieldRows","rows","scoreBoard","messageStart","messageWin","messageLose","columns","score","field","setNewCell","checkIfEmpty","value","Math","random","check","row","floor","col","updateTheGame","updateCell","cells","innerText","String","cell","num","classList","add","filterRow","filter","el","slide","newRow","i","length","isFinite","checkIfWin","push","remove","slideLeft","initialField","map","r","isArraysEquals","slideRight","reverse","slideUp","slideDown","checkIfPossible","checkIfLose","arrayA","arrayB","j","addEventListener","e","contains","code"],"mappings":"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","file":"main.7a0af63c.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst startBtn = document.querySelector('.start');\nconst fieldRows = document.querySelector('tbody').rows;\nconst scoreBoard = document.querySelector('.game-score');\n\nconst messageStart = document.querySelector('.message-start');\nconst messageWin = document.querySelector('.message-win');\nconst messageLose = document.querySelector('.message-lose');\n\nconst rows = 4;\nconst columns = 4;\nlet score = 0;\n\nlet field = [\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n];\n\nstartBtn.addEventListener('click', () => {\n  field = [\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n  ];\n\n  score = 0;\n\n  updateTheGame();\n  setNewCell();\n  setNewCell();\n\n  startBtn.classList.add('restart');\n  startBtn.innerText = 'Restart';\n\n  messageStart.classList.add('hidden');\n  messageWin.classList.add('hidden');\n  messageLose.classList.add('hidden');\n});\n\nfunction setNewCell() {\n  if (!checkIfEmpty()) {\n    return;\n  }\n\n  const value = Math.random() > 0.1 ? 2 : 4;\n\n  let check = false;\n\n  while (!check) {\n    const row = Math.floor(Math.random() * rows);\n    const col = Math.floor(Math.random() * columns);\n\n    if (field[row][col] === 0) {\n      field[row][col] = value;\n      check = true;\n\n      updateTheGame();\n    }\n  }\n}\n\nfunction updateTheGame() {\n  for (let row = 0; row < rows; row++) {\n    for (let col = 0; col < columns; col++) {\n      const currentCell = fieldRows[row].cells[col];\n      const num = field[row][col];\n\n      updateCell(currentCell, num);\n    }\n  }\n\n  scoreBoard.innerText = String(score);\n}\n\nfunction updateCell(cell, num) {\n  cell.innerText = '';\n  cell.classList.value = '';\n  cell.classList.add('field-cell');\n\n  if (num > 0) {\n    cell.innerText = String(num);\n    cell.classList.add(`field-cell--${String(num)}`);\n  }\n}\n\nfunction checkIfEmpty() {\n  for (let row = 0; row < rows; row++) {\n    for (let col = 0; col < columns; col++) {\n      if (field[row][col] === 0) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\ndocument.addEventListener('keyup', e => {\n  if (startBtn.classList.contains('restart')) {\n    switch (e.code) {\n      case 'ArrowLeft':\n        slideLeft();\n        break;\n\n      case 'ArrowRight':\n        slideRight();\n        break;\n\n      case 'ArrowUp':\n        slideUp();\n        break;\n\n      case 'ArrowDown':\n        slideDown();\n        break;\n    }\n  }\n\n  if (!checkIfPossible()) {\n    checkIfLose();\n  }\n});\n\nfunction filterRow(row) {\n  return row.filter(el => el !== 0);\n}\n\nfunction slide(row) {\n  let newRow = filterRow(row);\n\n  for (let i = 0; i < row.length - 1; i++) {\n    if (newRow[i] === newRow[i + 1] && isFinite(newRow[i])) {\n      newRow[i] *= 2;\n      newRow[i + 1] = 0;\n      score += newRow[i];\n      checkIfWin(newRow[i]);\n    }\n  }\n  newRow = filterRow(newRow);\n\n  while (newRow.length < columns) {\n    newRow.push(0);\n  }\n\n  return newRow;\n}\n\nfunction checkIfWin(value) {\n  if (value === 2048) {\n    messageWin.classList.remove('hidden');\n    startBtn.classList.remove('restart');\n    startBtn.innerText = 'Start';\n  }\n}\n\nfunction slideLeft() {\n  const initialField = field.map(row => [...row]);\n\n  for (let r = 0; r < rows; r++) {\n    let row = field[r];\n\n    row = slide(row);\n    field[r] = row;\n  }\n\n  if (!isArraysEquals(initialField, field)) {\n    setNewCell();\n  }\n\n  updateTheGame();\n}\n\nfunction slideRight() {\n  const initialField = field.map(row => [...row]);\n\n  for (let r = 0; r < rows; r++) {\n    let row = field[r];\n\n    row.reverse();\n    row = slide(row);\n    row.reverse();\n    field[r] = row;\n  }\n\n  if (!isArraysEquals(initialField, field)) {\n    setNewCell();\n  }\n\n  updateTheGame();\n}\n\nfunction slideUp() {\n  const initialField = field.map(row => [...row]);\n\n  for (let col = 0; col < columns; col++) {\n    let row = [field[0][col], field[1][col], field[2][col], field[3][col]];\n\n    row = slide(row);\n\n    for (let i = 0; i < columns; i++) {\n      field[i][col] = row[i];\n    }\n  }\n\n  if (!isArraysEquals(initialField, field)) {\n    setNewCell();\n  }\n\n  updateTheGame();\n}\n\nfunction slideDown() {\n  const initialField = field.map(row => [...row]);\n\n  for (let col = 0; col < columns; col++) {\n    let row = [field[0][col], field[1][col], field[2][col], field[3][col]];\n\n    row.reverse();\n    row = slide(row);\n    row.reverse();\n\n    for (let i = 0; i < columns; i++) {\n      field[i][col] = row[i];\n    }\n  }\n\n  if (!isArraysEquals(initialField, field)) {\n    setNewCell();\n  }\n\n  updateTheGame();\n}\n\nfunction checkIfPossible() {\n  let check = false;\n\n  for (let row = 0; row < rows; row++) {\n    for (let col = 0; col < columns; col++) {\n      if (row < 3) {\n        if (field[row][col] === field[row + 1][col]\n          || field[row][col] === field[row][col + 1]) {\n          check = true;\n        }\n      }\n    }\n  }\n\n  if (!check && !checkIfEmpty()) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction checkIfLose() {\n  messageLose.classList.remove('hidden');\n  startBtn.classList.remove('restart');\n  startBtn.innerText = 'Start';\n}\n\nfunction isArraysEquals(arrayA, arrayB) {\n  for (let i = 0; i < arrayA.length; i++) {\n    for (let j = 0; j < arrayA[i].length; j++) {\n      if (arrayA[i][j] !== arrayB[i][j]) {\n        return false;\n      }\n    }\n  }\n\n  return true;\n}\n"]}